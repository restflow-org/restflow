
imports:

  - classpath:/common/types.yaml
  - classpath:/common/groovy/actors.yaml
  - classpath:/common/directors.yaml
  
components:


- id: Incrementer
  type: Workflow
  properties:
    director: !ref DataDrivenDirector
    nodes:
      - !ref InputValueAndIncrement
      - !ref IncrementInputValue
      - !ref RenderInputs
      - !ref OutputIncrementedValueAndIncrement
    inputs:
      value: 
        default: 0 
      increment:
        default: 1
    outputs:
      incrementedValue: 
      appliedIncrement:
        
- id: InputValueAndIncrement
  type: InPortal
  properties:
    outflows: 
      value: /inputValue/
      increment: /inputIncrement/

- id: IncrementInputValue
  type: GroovyActorNode
  properties: 
    actor.step: |
      sum = a + b
    inflows:
      a: /inputValue/
      b: /inputIncrement/
    outflows:
      sum: /incrementedValue/   

- id: RenderInputs
  type: GroovyActorNode
  properties:
    actor.step: 
      println "Incrementer received value=" + value + " and increment=" + increment
    inflows:
      value: /inputValue/
      increment: /inputIncrement/

- id: OutputIncrementedValueAndIncrement
  type: OutPortal
  properties:
    inflows: 
      incrementedValue: /incrementedValue/
      appliedIncrement: /inputIncrement/

